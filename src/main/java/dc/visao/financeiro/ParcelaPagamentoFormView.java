package dc.visao.financeiro;

import java.util.List;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.ui.Button;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.Component;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.DateField;
import com.vaadin.ui.Field;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.PopupDateField;
import com.vaadin.ui.Table;
import com.vaadin.ui.TableFieldFactory;
import com.vaadin.ui.TextArea;
import com.vaadin.ui.TextField;
import com.vaadin.ui.VerticalLayout;

import dc.controller.financeiro.ParcelaPagamentoFormController;
import dc.entidade.financeiro.ParcelaPagamento;
import dc.visao.framework.component.SubFormComponent;
import dc.visao.framework.util.ComponentUtil;

public class ParcelaPagamentoFormView extends CustomComponent {

	/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	@AutoGenerated
	private VerticalLayout mainLayout;
	@AutoGenerated
	private GridLayout fields;

	@AutoGenerated
	private GridLayout pagamentoButtons;

	@AutoGenerated
	private HorizontalLayout pagamentosButtonsContainer;

	@AutoGenerated
	private PopupDateField dtDataVencimento;

	@AutoGenerated
	private PopupDateField dtDataPagamento;

	@AutoGenerated
	private ComboBox cbTipoBaixa;

	@AutoGenerated
	private ComboBox cbTipoPagamento;

	@AutoGenerated
	private ComboBox cbContaCaixa;

	@AutoGenerated
	private TextField txValorPagar;

	@AutoGenerated
	private TextField txTaxaJuro;

	@AutoGenerated
	private TextField txValorJuro;

	@AutoGenerated
	private TextField txTaxaMulta;

	@AutoGenerated
	private TextField txValorMulta;

	@AutoGenerated
	private TextField txTaxaDesconto;

	@AutoGenerated
	private TextField txValorDesconto;

	@AutoGenerated
	private TextField txValorPago;

	@AutoGenerated
	private TextArea txaHistorico;

	@AutoGenerated
	private Button btnACJEF;

	@AutoGenerated
	private Button btnSearch;

	@AutoGenerated
	private SubFormComponent<ParcelaPagamento, Integer> pagamentosSubForm;

	public ParcelaPagamentoFormView(ParcelaPagamentoFormController parcelaPagamentoFormController) {
		buildMainLayout();
		setCompositionRoot(mainLayout);
	}

	@AutoGenerated
	private VerticalLayout buildMainLayout() {
		// common part: create layout
		setSizeFull();
		mainLayout = new VerticalLayout();
		mainLayout.setImmediate(false);
		mainLayout.setSizeFull();
		mainLayout.setMargin(false);
		mainLayout.setSpacing(true);

		// top-level component properties
		setWidth("100.0%");
		//setHeight("100.0%");

		fields = buildFields();
		mainLayout.addComponent(fields);

		pagamentosSubForm = buildSubFormParcelaPagamento();
		mainLayout.addComponent(pagamentosSubForm);

		//mainLayout.setExpandRatio(pagamentosSubForm, 1.0f);

		return mainLayout;
	}

	@AutoGenerated
	private GridLayout buildFields() {
		// common part: create layout
		fields = new GridLayout(5, 6);
		fields.setImmediate(false);
		fields.setSizeFull();
		fields.setMargin(false);
		fields.setSpacing(true);

		pagamentoButtons = buildPagamentoButtons();
		fields.addComponent(pagamentoButtons, 0, 0, 4, 0);

		cbTipoBaixa = ComponentUtil.buildComboBox("Tipo Baixa");
		fields.addComponent(cbTipoBaixa, 0, 1);

		cbTipoPagamento = ComponentUtil.buildComboBox("Tipo Pagamento");
		fields.addComponent(cbTipoPagamento, 1, 1);

		cbContaCaixa = ComponentUtil.buildComboBox("Conta Caixa");
		fields.addComponent(cbContaCaixa, 2, 1);
		//

		dtDataVencimento = ComponentUtil.buildPopupDateField("Data Vencimento");
		fields.addComponent(dtDataVencimento, 0, 2);

		dtDataPagamento = ComponentUtil.buildPopupDateField("Data Pagamento");
		fields.addComponent(dtDataPagamento, 1, 2);

		txValorPagar = ComponentUtil.buildTextField("Valor à Pagar");
		fields.addComponent(txValorPagar, 2, 2);

		txTaxaJuro = ComponentUtil.buildTextField("Taxa Juro");
		fields.addComponent(txTaxaJuro, 3, 2);

		txValorJuro = ComponentUtil.buildTextField("Valor Juro");
		fields.addComponent(txValorJuro, 4, 2);
		//

		txTaxaMulta = ComponentUtil.buildTextField("Taxa Multa");
		fields.addComponent(txTaxaMulta, 0, 3);

		txValorMulta = ComponentUtil.buildTextField("Valor Multa");
		fields.addComponent(txValorMulta, 1, 3);

		txTaxaDesconto = ComponentUtil.buildTextField("Taxa Desconto");
		fields.addComponent(txTaxaDesconto, 2, 3);

		txValorDesconto = ComponentUtil.buildTextField("Valor Desconto");
		fields.addComponent(txValorDesconto, 3, 3);

		txValorPago = ComponentUtil.buildTextField("Valor Pago");
		fields.addComponent(txValorPago, 4, 3);

		txaHistorico = ComponentUtil.buildTextArea("Histórico");
		fields.addComponent(txaHistorico, 0, 4, 4, 5);

		return fields;
	}

	private GridLayout buildPagamentoButtons() {
		pagamentoButtons = new GridLayout(2, 1);
		pagamentoButtons.setImmediate(false);
		pagamentoButtons.setWidth("100.0%");
		pagamentoButtons.setHeight("-1px");
		pagamentoButtons.setMargin(false);
		pagamentoButtons.setSpacing(true);

		btnACJEF = new Button("ACJEF");
		btnACJEF.setImmediate(true);
		pagamentoButtons.addComponent(btnACJEF, 0, 0);

		return pagamentoButtons;
	}

	private SubFormComponent<ParcelaPagamento, Integer> buildSubFormParcelaPagamento() {

		String[] atributos = new String[] { "tipoPagamento", "dataPagamento", "taxaJuro", "valorJuro", "taxaMulta", "valorMulta", "taxaDesconto",
				"valorDesconto", "valorPago", "historico" };

		String[] headers = new String[] { "tipoPagamento", "dataPagamento", "taxaJuro", "valorJuro", "taxaMulta", "valorMulta", "taxaDesconto",
				"valorDesconto", "valorPago", "historico" };

		this.pagamentosSubForm = new SubFormComponent<ParcelaPagamento, Integer>(ParcelaPagamento.class, atributos, headers) {

			private static final long serialVersionUID = 1L;

			@Override
			protected void adicionarBotoes(Table table) {

			}

			@Override
			protected TableFieldFactory getFieldFactory() {
				return new TableFieldFactory() {

					/**
					 * 
					 */
					private static final long serialVersionUID = 1L;

					@Override
					public Field<?> createField(Container container, Object itemId, Object propertyId, Component uiContext) {

						if ("dataPagamento".equals(propertyId)) {
							DateField dateField = new DateField();
							dateField.setSizeFull();
							return dateField;
						} else {
							return ComponentUtil.buildTextField(null);
						}
					}

				};
			}

			@Override
			public boolean validateItems(List<ParcelaPagamento> items) {
				return true;
			}
		};

		return this.pagamentosSubForm;
	}

	public void preencheBean(ParcelaPagamento currentBean) {
		// TODO Auto-generated method stub

	}

	public void preencheForm(ParcelaPagamento currentBean) {
		cbTipoBaixa.setValue(null);
		dtDataVencimento.setValue(null);
		dtDataPagamento.setValue(null);
		txValorPagar.setConvertedValue(null);
		cbContaCaixa.setValue(currentBean.getContaCaixa());
		cbTipoPagamento.setValue(currentBean.getTipoPagamento());
		txTaxaJuro.setConvertedValue(currentBean.getTaxaJuro());
		txValorJuro.setConvertedValue(currentBean.getValorJuro());
		txTaxaMulta.setConvertedValue(currentBean.getTaxaMulta());
		txValorMulta.setConvertedValue(currentBean.getValorMulta());
		txTaxaDesconto.setConvertedValue(currentBean.getTaxaDesconto());
		txValorDesconto.setConvertedValue(currentBean.getValorDesconto());
		txValorPago.setConvertedValue(currentBean.getValorPago());
		txaHistorico.setValue(currentBean.getHistorico());

	}

	public GridLayout getFields() {
		return fields;
	}

	public void setFields(GridLayout fields) {
		this.fields = fields;
	}

	public PopupDateField getDtDataVencimento() {
		return dtDataVencimento;
	}

	public void setDtDataVencimento(PopupDateField dtDataVencimento) {
		this.dtDataVencimento = dtDataVencimento;
	}

	public PopupDateField getDtDataPagamento() {
		return dtDataPagamento;
	}

	public void setDtDataPagamento(PopupDateField dtDataPagamento) {
		this.dtDataPagamento = dtDataPagamento;
	}

	public ComboBox getCbTipoBaixa() {
		return cbTipoBaixa;
	}

	public void setCbTipoBaixa(ComboBox cbTipoBaixa) {
		this.cbTipoBaixa = cbTipoBaixa;
	}

	public ComboBox getCbTipoPagamento() {
		return cbTipoPagamento;
	}

	public void setCbTipoPagamento(ComboBox cbTipoPagamento) {
		this.cbTipoPagamento = cbTipoPagamento;
	}

	public ComboBox getCbContaCaixa() {
		return cbContaCaixa;
	}

	public void setCbContaCaixa(ComboBox cbContaCaixa) {
		this.cbContaCaixa = cbContaCaixa;
	}

	public TextField getTxValorPagar() {
		return txValorPagar;
	}

	public void setTxValorPagar(TextField txValorPagar) {
		this.txValorPagar = txValorPagar;
	}

	public TextField getTxTaxaJuro() {
		return txTaxaJuro;
	}

	public void setTxTaxaJuro(TextField txTaxaJuro) {
		this.txTaxaJuro = txTaxaJuro;
	}

	public TextField getTxValorJuro() {
		return txValorJuro;
	}

	public void setTxValorJuro(TextField txValorJuro) {
		this.txValorJuro = txValorJuro;
	}

	public TextField getTxTaxaMulta() {
		return txTaxaMulta;
	}

	public void setTxTaxaMulta(TextField txTaxaMulta) {
		this.txTaxaMulta = txTaxaMulta;
	}

	public TextField getTxValorMulta() {
		return txValorMulta;
	}

	public void setTxValorMulta(TextField txValorMulta) {
		this.txValorMulta = txValorMulta;
	}

	public TextField getTxTaxaDesconto() {
		return txTaxaDesconto;
	}

	public void setTxTaxaDesconto(TextField txTaxaDesconto) {
		this.txTaxaDesconto = txTaxaDesconto;
	}

	public TextField getTxValorDesconto() {
		return txValorDesconto;
	}

	public void setTxValorDesconto(TextField txValorDesconto) {
		this.txValorDesconto = txValorDesconto;
	}

	public TextField getTxValorPago() {
		return txValorPago;
	}

	public void setTxValorPago(TextField txValorPago) {
		this.txValorPago = txValorPago;
	}

	public TextArea getTxaHistorico() {
		return txaHistorico;
	}

	public void setTxaHistorico(TextArea txaHistorico) {
		this.txaHistorico = txaHistorico;
	}

	public SubFormComponent<ParcelaPagamento, Integer> getPagamentosSubForm() {
		return pagamentosSubForm;
	}

	public void setPagamentosSubForm(SubFormComponent<ParcelaPagamento, Integer> pagamentosSubForm) {
		this.pagamentosSubForm = pagamentosSubForm;
	}
}
